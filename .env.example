# GM Agent Configuration
# Copy this file to .env and customize

# =============================================================================
# Ollama Settings
# =============================================================================

# URL of the Ollama server
OLLAMA_URL=http://localhost:11434

# Model to use for generation
OLLAMA_MODEL=qwen3:latest

# =============================================================================
# Path Settings
# =============================================================================

# Directory for campaign storage (JSON files)
# Default: ./data/campaigns
# CAMPAIGNS_DIR=./data/campaigns

# Path to Pathfinder search database (built by extraction tools)
# Default: ./data/pathfinder_search.db
# RAG_DB_PATH=./data/pathfinder_search.db

# =============================================================================
# Tool Execution Settings
# =============================================================================

# Enable parallel execution of independent MCP tool calls
# Default: false (sequential) - set to true if your backend can handle parallel requests
# PARALLEL_TOOL_CALLS=false

# =============================================================================
# Context Settings
# =============================================================================

# Maximum number of recent turns to include in context
MAX_RECENT_TURNS=15

# Maximum estimated tokens for context (used for truncation)
MAX_CONTEXT_TOKENS=8000

# Number of turns between automatic rolling summaries
TURNS_BETWEEN_SUMMARIES=10

# =============================================================================
# API Authentication (Optional)
# =============================================================================

# Enable JWT authentication for API endpoints
# Set to 'true' to require authentication
API_AUTH_ENABLED=false

# Secret key for JWT tokens (change in production!)
JWT_SECRET_KEY=dev-secret-change-in-production

# Default credentials (change in production!)
API_USERNAME=admin
API_PASSWORD=changeme

# =============================================================================
# MCP (Model Context Protocol) Settings
# =============================================================================

# MCP execution mode:
# - "local" = Direct in-process server execution (default)
# - "remote" = API -> Celery -> Workers (for Docker CLI)
# MCP_MODE=local

# API URL for remote mode (only used when MCP_MODE=remote)
# MCP_API_URL=http://localhost:5000

# =============================================================================
# Foundry VTT Communication Mode
# =============================================================================

# Communication mode with Foundry VTT:
# - "websocket" = Foundry connects TO gm-agent via Socket.IO (default, for local/same network)
# - "polling" = gm-agent polls Foundry via REST API (for remote/cloud Foundry)
# FOUNDRY_MODE=websocket

# Polling mode settings (only used when FOUNDRY_MODE=polling)
# See docs/DEPLOYMENT.md for detailed configuration guide

# URL of your Foundry VTT instance (must be accessible from gm-agent)
# FOUNDRY_POLL_URL=https://your-foundry.example.com

# API key for authentication (must match Foundry module's "Polling API Key" setting)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
# FOUNDRY_API_KEY=your-secure-api-key-here

# Campaign ID to use for polling connection
# FOUNDRY_CAMPAIGN_ID=my-campaign

# Polling interval in seconds (default: 2.0)
# Lower = more responsive but higher server load
# FOUNDRY_POLL_INTERVAL=2.0

# Long-poll timeout in seconds (default: 25.0)
# Server holds request open until events arrive or timeout
# FOUNDRY_LONG_POLL_TIMEOUT=25.0

# Verify SSL certificates (default: true)
# Set to false only for development with self-signed certificates
# FOUNDRY_VERIFY_SSL=true
